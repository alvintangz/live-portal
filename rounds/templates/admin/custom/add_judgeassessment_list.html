{% extends "admin/custom/inline_top_change_form.html" %}
{% load i18n %}

{% block form_top %}
<script>
    function eAUS() {
      document.getElementById('id_username').value = "judge" + document.getElementById('id_judge-0-number').value;
    }

    function generatePass() {
      var length = 3;
      var chars = "0123456789";
      var retVal = "";
      for (var i = 0, n = chars.length; i < length; ++i) {
        retVal += chars.charAt(Math.floor(Math.random() * n));
      }
      retVal = document.getElementById('id_first_name').value.replace(/ /g,'').toLowerCase() + document.getElementById('id_last_name').value.replace(/ /g,'').toLowerCase() + retVal
      document.getElementById('showpas').innerHTML = retVal;
      document.getElementById('id_password1').value = retVal;
      document.getElementById('id_password2').value = retVal;
    }

    document.addEventListener('DOMContentLoaded', function(){
      document.getElementById('id_judge-0-number').addEventListener("keyup", eAUS);
      document.getElementById('id_first_name').addEventListener("keyup", generatePass);
      document.getElementById('id_last_name').addEventListener("keyup", generatePass);
    }, false);

  </script>
  <p>To create a judge, enter the details below except password and username. The username is automatically written as <strong>judge[NUMBER]</strong> with the number that was inputted, and the password was automatically generated as their first and last name with 3 random numbers.</p>
  <p>Generated password: <strong><span id="showpas"></span></strong></p>
  {% endblock %}
